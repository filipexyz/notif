/**
 * Generated by schem - DO NOT EDIT
 * Schema: PermissionResponse v1.0.0
 */

export interface PermissionResponseHookSpecificOutputDecision {
  /** Whether to allow or deny the permission */
  behavior: 'allow' | 'deny';
  /** Denial message (only used when behavior is deny) */
  message?: string;
}

export interface PermissionResponseHookSpecificOutput {
  /** Always "PermissionRequest" */
  hookEventName: string;
  decision: PermissionResponseHookSpecificOutputDecision;
}

export interface PermissionResponse {
  /** Claude Code session identifier */
  sessionId?: string;
  hookSpecificOutput: PermissionResponseHookSpecificOutput;
}

export const PermissionResponseSchema = {
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "permissionresponse.schema.json",
  "title": "PermissionResponse",
  "type": "object",
  "properties": {
    "sessionId": {
      "type": "string",
      "description": "Claude Code session identifier"
    },
    "hookSpecificOutput": {
      "type": "object",
      "properties": {
        "hookEventName": {
          "type": "string",
          "description": "Always \"PermissionRequest\""
        },
        "decision": {
          "type": "object",
          "properties": {
            "behavior": {
              "type": "string",
              "enum": [
                "allow",
                "deny"
              ],
              "description": "Whether to allow or deny the permission"
            },
            "message": {
              "type": "string",
              "description": "Denial message (only used when behavior is deny)"
            }
          },
          "required": [
            "behavior"
          ]
        }
      },
      "required": [
        "hookEventName",
        "decision"
      ]
    }
  },
  "required": [
    "hookSpecificOutput"
  ],
  "description": "Permission response sent back to Claude Code hook"
} as const;

/**
 * Validate data against the PermissionResponse schema
 * @throws Error if validation fails
 */
export function validatePermissionResponse(data: unknown): PermissionResponse {
  if (typeof data !== 'object' || data === null) {
    throw new Error('Expected an object');
  }

  const obj = data as Record<string, unknown>;

  if (obj['hookSpecificOutput'] === undefined) {
    throw new Error('Missing required field: hookSpecificOutput');
  }

  return data as PermissionResponse;
}
